/**
 * Fikfikk Shimmer - Laravel Image Shimmer Package
 * @version 1.0.0
 * @author FikFikk
 * @license MIT
 */
const FikfikkShimmer = { init: function () { document.querySelectorAll('[data-shimmer-image], .shimmer-image').forEach(img => { const container = img.closest('[data-shimmer-container], [data-shimmer], .shimmer-container, .shimmer-image-container'); const placeholder = container?.querySelector('[data-shimmer-placeholder], .shimmer-placeholder'); function imageLoaded() { img.classList.add('loaded'); img.style.opacity = '1'; if (placeholder) placeholder.classList.add('hidden') } if (img.complete && img.naturalHeight !== 0) imageLoaded(); else { img.addEventListener('load', imageLoaded); img.addEventListener('error', () => { if (placeholder) placeholder.classList.add('hidden') }) } }) }, create: function (options) { const container = typeof options.container === 'string' ? document.querySelector(options.container) : options.container; if (!container) return null; const width = options.width ? `width:${typeof options.width === 'number' ? options.width + 'px' : options.width};` : ''; const height = options.height ? `height:${typeof options.height === 'number' ? options.height + 'px' : options.height};` : ''; const aspectRatio = !options.height && options.aspectRatio ? `aspect-ratio:${options.aspectRatio};` : ''; const html = `<div class="shimmer-container" data-shimmer-container style="${width}${height}${aspectRatio}"><div class="shimmer-placeholder" data-shimmer-placeholder><div class="shimmer-animation"></div></div><img src="${options.src}" alt="${options.alt || ''}" class="shimmer-image ${options.class || ''}" loading="${options.loading || 'lazy'}" decoding="${options.decoding || 'async'}" data-shimmer-image style="opacity:0;"></div>`; container.innerHTML = html; const imgElement = container.querySelector('[data-shimmer-image]'); if (options.onLoad) { imgElement.addEventListener('load', () => options.onLoad(imgElement)) } if (options.onError) { imgElement.addEventListener('error', () => options.onError(imgElement)) } this.init(); return container.firstElementChild }, refresh: function () { this.init() }, version: '1.0.0' }; if (typeof window !== 'undefined') { window.FikfikkShimmer = FikfikkShimmer } if (typeof module !== 'undefined' && module.exports) { module.exports = FikfikkShimmer } if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', () => FikfikkShimmer.init()) } else { FikfikkShimmer.init() }
